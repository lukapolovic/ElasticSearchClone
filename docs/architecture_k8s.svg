<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="760" viewBox="0 0 1200 760" role="img" aria-label="ElasticSearchClone Kubernetes architecture diagram (simplified)">
  <defs>
    <style>
      .title { font: 700 26px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill: #111827; }
      .sub   { font: 500 14px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill: #374151; }
      .h     { font: 700 16px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill: #111827; }
      .t     { font: 500 12px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill: #4b5563; }
      .k8s   { fill: #ecfeff; stroke: #0891b2; stroke-width: 2; rx: 14; }
      .box   { fill: #ffffff; stroke: #111827; stroke-width: 2; rx: 14; }
      .soft  { fill: #f9fafb; stroke: #9ca3af; stroke-width: 2; rx: 14; }
      .warn  { fill: #fff7ed; stroke: #ea580c; stroke-width: 2; rx: 14; }
      .arr   { stroke: #111827; stroke-width: 2.5; fill: none; }
      .hb    { stroke: #0891b2; stroke-width: 2.5; fill: none; stroke-dasharray: 6 6; }
    </style>

    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#111827" />
    </marker>

    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0891b2" />
    </marker>
  </defs>

  <!-- Header -->
  <text x="40" y="52" class="title">Kubernetes Deployment (Simplified)</text>
  <text x="40" y="78" class="sub">Router routes requests to Coordinators; Coordinators query Shard replicas with read quorum; Heartbeats track replica health.</text>

  <!-- Cluster boundary -->
  <rect x="40" y="110" width="1120" height="600" class="k8s"/>
  <text x="600" y="145" text-anchor="middle" class="h">Kubernetes Cluster • Namespace: esc</text>

  <!-- Router -->
  <rect x="90" y="190" width="310" height="140" class="box"/>
  <text x="245" y="220" text-anchor="middle" class="h">Router</text>
  <text x="245" y="242" text-anchor="middle" class="t">Service: router</text>
  <text x="245" y="262" text-anchor="middle" class="t">/search, /ready</text>
  <rect x="120" y="275" width="250" height="40" class="soft"/>
  <text x="245" y="300" text-anchor="middle" class="t">Pod: router-*</text>

  <!-- Coordinators -->
  <rect x="450" y="190" width="320" height="140" class="box"/>
  <text x="610" y="220" text-anchor="middle" class="h">Coordinators</text>
  <text x="610" y="242" text-anchor="middle" class="t">Headless Service: coordinator</text>
  <text x="610" y="262" text-anchor="middle" class="t">Pods: coord-0, coord-1, coord-2</text>

  <rect x="470" y="275" width="90" height="40" class="soft"/>
  <text x="515" y="300" text-anchor="middle" class="t">coord-0</text>
  <rect x="565" y="275" width="90" height="40" class="soft"/>
  <text x="610" y="300" text-anchor="middle" class="t">coord-1</text>
  <rect x="660" y="275" width="90" height="40" class="soft"/>
  <text x="705" y="300" text-anchor="middle" class="t">coord-2</text>

  <!-- Quorum -->
  <rect x="810" y="190" width="300" height="140" class="warn"/>
  <text x="960" y="220" text-anchor="middle" class="h">Read Quorum</text>
  <text x="960" y="246" text-anchor="middle" class="t">Per shard-group: require</text>
  <text x="960" y="266" text-anchor="middle" class="t">majority successful replicas</text>
  <text x="960" y="288" text-anchor="middle" class="t">Example (3 replicas): quorum = 2</text>

  <!-- Shards -->
  <rect x="90" y="380" width="1020" height="290" class="box"/>
  <text x="600" y="412" text-anchor="middle" class="h">Shards (3 logical shards × 3 replicas)</text>
  <text x="600" y="434" text-anchor="middle" class="t">Headless Service: shard • StatefulSet per shard-id</text>

  <!-- shard0 -->
  <rect x="120" y="470" width="300" height="170" class="soft"/>
  <text x="270" y="498" text-anchor="middle" class="h">shard0</text>
  <text x="270" y="520" text-anchor="middle" class="t">Pods: shard0-0, shard0-1, shard0-2</text>
  <text x="270" y="542" text-anchor="middle" class="t">/internal/search, /internal/ready</text>

  <!-- shard1 -->
  <rect x="450" y="470" width="300" height="170" class="soft"/>
  <text x="600" y="498" text-anchor="middle" class="h">shard1</text>
  <text x="600" y="520" text-anchor="middle" class="t">Pods: shard1-0, shard1-1, shard1-2</text>
  <text x="600" y="542" text-anchor="middle" class="t">/internal/search, /internal/ready</text>

  <!-- shard2 -->
  <rect x="780" y="470" width="300" height="170" class="soft"/>
  <text x="930" y="498" text-anchor="middle" class="h">shard2</text>
  <text x="930" y="520" text-anchor="middle" class="t">Pods: shard2-0, shard2-1, shard2-2</text>
  <text x="930" y="542" text-anchor="middle" class="t">/internal/search, /internal/ready</text>

  <!-- Arrows: Router -> Coordinators -->
  <path d="M 400 260 L 450 260" class="arr" marker-end="url(#arrow)"/>
  <text x="425" y="248" text-anchor="middle" class="t">/search</text>

  <!-- Arrows: Coordinators -> Shards -->
  <path d="M 610 330 L 610 380" class="arr" marker-end="url(#arrow)"/>
  <text x="650" y="360" class="t">fan-out</text>

  <!-- Heartbeats: Coordinators -> Shards -->
  <path d="M 705 315 C 760 360, 820 420, 930 470" class="hb" marker-end="url(#arrowBlue)"/>
  <path d="M 610 315 C 600 360, 600 420, 600 470" class="hb" marker-end="url(#arrowBlue)"/>
  <path d="M 515 315 C 460 360, 380 420, 270 470" class="hb" marker-end="url(#arrowBlue)"/>
  <text x="820" y="348" class="t" fill="#0891b2">heartbeats: /internal/ready</text>

  <!-- Legend -->
  <rect x="90" y="690" width="1020" height="0" fill="none"/>
  <rect x="90" y="690" width="0" height="0" fill="none"/>

  <rect x="90" y="675" width="1020" height="0" fill="none"/>

  <rect x="90" y="675" width="0" height="0" fill="none"/>

  <rect x="90" y="680" width="420" height="0" fill="none"/>

  <rect x="90" y="680" width="420" height="0" fill="none"/>

  <rect x="90" y="680" width="0" height="0" fill="none"/>

  <rect x="90" y="680" width="0" height="0" fill="none"/>

  <rect x="90" y="680" width="0" height="0" fill="none"/>

  <rect x="90" y="680" width="0" height="0" fill="none"/>

  <!-- Legend box -->
  <rect x="90" y="690" width="520" height="0" fill="none"/>

  <rect x="90" y="650" width="520" height="50" class="soft"/>
  <text x="110" y="680" class="t">Legend:</text>
  <line x1="170" y1="674" x2="240" y2="674" class="arr" marker-end="url(#arrow)"/>
  <text x="250" y="679" class="t">Request path</text>
  <line x1="370" y1="674" x2="440" y2="674" class="hb" marker-end="url(#arrowBlue)"/>
  <text x="450" y="679" class="t">Heartbeats</text>

</svg>